.phony: clean veryclean pmd_wrapper

all: pmd_wrapper mods

obj= pmd_wrapper.F90
pmddir= ${HOME}/src/nap/pmd

ompopts=  --f90flags="-fopenmp" -lgomp

compopts= --f77exec=@FC@ --f90exec=@FC@ --quiet
# compopts= --f90exec=@FC@ --quiet --fcompiler=gnu95

pmd_wrapper: ${obj}
#	f2py  ${compopts} -m $@ -I${pmddir} -c $^ -L${pmddir} -lpmd   # use mpif90 directly w/o openmp
	f2py  ${compopts} -m $@ -I${pmddir} -c $^ -L${pmddir} -lpmd ${ompopts}  # add ompopts if pmd was compiled with -fopenmp

clean:
	rm -f *.o *.so *~

veryclean: clean
	rm -f out.*
